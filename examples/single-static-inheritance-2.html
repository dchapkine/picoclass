<!doctype html>
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'/>
<link rel="stylesheet" title="Sunburst" href="http://yandex.st/highlightjs/6.1/styles/github.css"/>
<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js">
{
    overrideConsole: true,
    startOpened: true,
    enableTrace: true
}
</script>
<script src="http://yandex.st/highlightjs/6.1/highlight.min.js"></script>
<script src="../src/picoclass.js"></script>
<script src="log.js"></script>
  
<script id="example" type='text/javascript'>

	// Bon, pour bien faire il faudrait ne pas pouvoir faire new Singleton depuis l'exterieur
	// de Singleton.... mais ça ne sera pas possible à simuler... et puis on s'en ****,
	// vous n'avez qu'a ne pas faire new Singleton !! :)
	Singleton = $class({
		static: {
			// Je tiens à rappeler que this dans le bloc statique, fait reference au bloc statique et non à l'instance
			//
			// Donc "new this" va créer une instance de la classe courante ;-)
			//
			// Je vous rappelle egalement, que notre systéme herite du bloc statique, donc le this
			// est "dynamique"... ce qui veut dire que si une classe herite de Singleton, this va faire
			// reference à la classe qui herite et non à Singleton 
			_instance: null,
			getInstance: function()
			{
				if (this._instance == null)
					this._instance = new this;
				return this._instance;
			}
		}
	});
	 
	// Il n'y a qu'un seul dieu (oupas)
	Dieu = $class({
		extends: Singleton
	});
	 
	// Autour du notre soleil bien evidement :D
	SystemeSolaire = $class({
		extends: Singleton
	});
	 
	// Bon, à partir du moment ou il n'y a pas d'univers parallels
	AlbertEinstein = $class({
		extends: Singleton
	});
	 
	 
	// Usage
	// On verifie bien le type des instances
	console.log(Dieu.getInstance() instanceof Dieu);    // true
	console.log(SystemeSolaire.getInstance() instanceof SystemeSolaire);    // true
	console.log(AlbertEinstein.getInstance() instanceof AlbertEinstein);    // true
	 
	// Notez aussi qu'elle sont toutes des insances de Singleton egalement car elle en heritent ;-)
	console.log(Dieu.getInstance() instanceof Singleton);    // true
	console.log(SystemeSolaire.getInstance() instanceof Singleton);    // true
	console.log(AlbertEinstein.getInstance() instanceof Singleton);    // true


</script>
</head>
<body>
<h1>Single static inheritance example (2)</h1>
<pre class="javascript"><code id="code"></code></pre>
<script>
  hljs.tabReplace = '    ';
  hljs.initHighlightingOnLoad();
  document.getElementById("code").innerText = document.getElementById("example").innerText;
</script>
</body>
</html>
